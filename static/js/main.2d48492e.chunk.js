(this["webpackJsonpcamaew-up"]=this["webpackJsonpcamaew-up"]||[]).push([[0],{116:function(e,a,t){e.exports={cellwidth:"120px",cellheight:"120px",cellmargin:"3px",tokenwidth:"80px",tokenheight:"30px",tokenmargin:"5px"}},142:function(e,a){},146:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(26),c=t.n(l),o=(t(98),t(9)),i=t(89),m=t(45),s=t(17),u=t(79);function d(e,a){for(var t=new Array(e),n=0;n<e;n++)t[n]=Object(s.cloneDeep)(a);return t}function p(e){var a=Array.from(new Array(e.numCats),(function(e,a){return a}));return a.sort((function(a,t){return 100*(e.cats[t][0]-e.cats[a][0])+(e.cats[t][1]-e.cats[a][1])})),a}function f(e,a){e.dice=Array(e.numCats).fill(0);for(var t=0;t<a.numPlayers;t++)e.players[t].smallBets=Array(e.numCats).fill([]),g(e,t);e.smallStack=Array(e.numCats).fill([2,3,5])}function v(e,a){e.dice=Array(e.numCats).fill(0);for(var t=p(e),n=0;n<a.numPlayers;n++){var r=0;r+=Object(s.sum)(e.players[n].smallBets[t[0]]),r+=e.players[n].smallBets[t[1]].length;for(var l=2;l<e.numCats;l++)r-=e.players[n].smallBets[t[l]].length;e.players[n].coins+=r}}function y(e,a,t){var n=e.dice.filter((function(e){return 0===e})).length,r=a.random.Die(n)-1,l=a.random.Die(3),c=0,o=0;for(o=0;o<e.numCats;o++)if(0===e.dice[o]){if(c===r){e.dice[o]=l,e.lastDiceRolled=o;break}c++}return o===e.numCats&&console.error("Something's wrong. The dice probably didn't get reset."),function(e,a,t,n){var r=e.cats[t][0],l=[];if(r>=0){var c=e.board[r].stack,o=c.indexOf(t);l=c.slice(o),e.board[r].stack=e.board[r].stack.slice(0,o)}else l=[t];var i=e.board[r+n].stack.length;e.board[r+n].stack=e.board[r+n].stack.concat(l);for(var m=0;m<l.length;m++)e.cats[l[m]]=[r+n,i+m];e.cleanUp=r+n}(e,0,o,l),null!=t&&(e.players[t].coins+=1),[o,l]}function E(e,a,t,n){e.board[t].mod={playerID:a,type:n},e.players[a].modPos=t}function g(e,a){e.players[a].modPos>-1&&(e.board[e.players[a].modPos].mod=null,e.players[a].modPos=-1)}function b(e,a){e.logArray.push(a)}var h={name:"CamaewUp",plugins:[Object(u.EffectsPlugin)({effects:{endTurn:{},roll:{create:function(e){return e},duration:1},rollDone:{create:function(e){return e}},moveFwd:{create:function(e){return e},duration:.3},moveBack:{create:function(e){return e},duration:.3},modTape:{create:function(e){return e},duration:.3},modCucumber:{create:function(e){return e},duration:.3},something:{}}})],setup:function(e,a){var t={dice:Array(a.numCats).fill(0),cats:Array(a.numCats).fill([-1,-1]),board:d(a.numTiles+3,{stack:[],mod:null}),players:d(e.numPlayers,{coins:3,smallBets:Array(a.numCats).fill([]),betCards:Array(a.numCats).fill(!0),modPos:-1}),smallStack:Array(a.numCats).fill([2,3,5]),bigStack:{win:[],lose:[]},logArray:[],numCats:a.numCats,numTiles:a.numTiles,numPlayers:e.numPlayers,lastDiceRolled:-1,cleanUp:-1};b(t,{move:"text",text:"Welcome!"});for(var n=0;n<t.numCats;n++)y(t,e);return f(t,e),t},moves:{roll:function(e,a,t){var n=e.dice.slice(),r=Object(s.cloneDeep)(e.cats),l=Object(s.cloneDeep)(e.board),c=y(e,a,t),i=Object(o.a)(c,2),m=i[0],u=i[1];a.effects.roll({catID:m,preDice:n}),a.effects.rollDone(e.dice.slice());for(var d=0;d<u;d++)a.effects.moveFwd({catID:m,roll:d,preCats:r,preBoard:l});(b(e,{playerID:t,move:"roll",catID:m,roll:u}),function(e,a){var t=e.board[e.cleanUp].mod;if(null!==t){b(e,{move:"mod",mod:t.type}),e.players[t.playerID].coins+=1;var n=e.board[e.cleanUp].stack.slice();e.board[e.cleanUp].stack=[];var r=999;"tape"===t.type?(r=e.cleanUp-1,a.effects.modTape({cellNum:e.cleanUp,preCats:Object(s.cloneDeep)(e.cats),prevStack:e.board[e.cleanUp-1].stack.slice(),stack:n}),e.board[r].stack=n.concat(e.board[r].stack)):"cucumber"===t.type&&(r=e.cleanUp+1,a.effects.modCucumber({cellNum:e.cleanUp,preCats:Object(s.cloneDeep)(e.cats),destHeight:e.board[r].stack.length,stack:n}),e.board[r].stack=e.board[r].stack.concat(n));for(var l=0;l<e.board[r].stack.length;l++)e.cats[e.board[r].stack[l]]=[r,l]}}(e,a),e.cleanUp>=e.numTiles)&&(v(e,a),function(e,a){for(var t=p(e),n=[1,2,3,5,8],r=0;r<e.bigStack.win.length;r++){var l=e.bigStack.win[r];l.bet===t[0]?e.players[l.playerID].coins+=n.pop():e.players[l.playerID].coins-=1,0===n.length&&(n=[1])}for(var c=[1,2,3,5,8],o=0;o<e.bigStack.lose.length;o++){var i=e.bigStack.lose[o];i.bet===t[e.numCats-1]?e.players[i.playerID].coins+=c.pop():e.players[i.playerID].coins-=1,0===c.length&&(c=[1])}}(e),b(e,{move:"text",text:"Winners: "+function(e){for(var a=[e.players[0].coins],t=[0],n=1;n<e.numPlayers;n++)e.players[n].coins>a?(a=e.players[n].coins,t=[n]):e.players[n].coins===a&&t.push(n);return t}(e)}),b(e,{move:"text",text:"--- End of game ---"}));0===e.dice.filter((function(e){return 0===e})).length&&(b(e,{move:"text",text:"--- End of small round ---"}),v(e,a),f(e,a))},makeSmallBet:function(e,a,t,n){var r=function(e,a,t){var n=e.smallStack[t].pop();return e.players[a].smallBets[t].push(n),n}(e,t,n);b(e,{playerID:t,move:"smallBet",catID:n,card:r})},makeBigBet:function(e,a,t,n,r){!function(e,a,t,n){e.bigStack[n].push({playerID:a,bet:t}),e.players[a].betCards[t]=!1}(e,t,n,r),b(e,{playerID:t,move:"bigBet",side:r})},placeMod:function(e,a,t,n,r){E(e,t,n,r),b(e,{playerID:t,move:"placeMod",cellID:n,type:r})},removeMod:function(e,a,t){g(e,t),b(e,{playerID:t,move:"removeMod",cellID:e.players[t].modPos})},flipMod:function(e,a,t){var n="tape"===e.board[e.players[t].modPos].mod.type?"cucumber":"tape",r=e.players[t].modPos;g(e,t),E(e,t,r,n),b(e,{playerID:t,move:"flipMod",cellID:e.players[t].modPos})},moveMod:function(e,a,t,n,r){g(e,t),E(e,t,n,r),b(e,{playerID:t,move:"placeMod",cellID:n,type:r})}},turn:{moveLimit:1,onEnd:function(e,a){},onMove:function(e,a){}},minPlayers:2,maxPlayers:8},k=t(151),C=t(90);function D(e){var a=e.data,t=e.onJoinClick,n=e.onCreateClick;return r.a.createElement("div",{id:"entry-container",className:"lobby"},r.a.createElement("div",{id:"entry-server"},r.a.createElement(k.a.Label,null,"Server"),r.a.createElement(k.a.Control,{type:"text",value:a.serverPath,onChange:a.onServerPathChange})),r.a.createElement("div",null,r.a.createElement(C.a,{variant:"primary",onClick:t,size:"lg"},"Join Game")),r.a.createElement("div",null,r.a.createElement(C.a,{variant:"primary",onClick:n,size:"lg"},"Create Game")))}function I(e){var a=e.data,t=e.onJoinJoinClick;return r.a.createElement("div",{className:"lobby"},r.a.createElement("div",null,r.a.createElement(k.a.Label,null,"Name"),r.a.createElement(k.a.Control,{type:"text",value:a.name,onChange:a.onNameChange})),r.a.createElement("div",{id:"join-gameid"},r.a.createElement(k.a.Label,null,"Game ID"),r.a.createElement(k.a.Control,{type:"text",value:a.gameID,onChange:a.onGameIDChange})),r.a.createElement("div",{id:"lobby-join",className:"center"},r.a.createElement(k.a.Label,null,"Join Game"),r.a.createElement(C.a,{variant:"primary",onClick:t,disabled:!a.gameID||!a.name},"Join"),r.a.createElement(C.a,{variant:"secondary",onClick:a.backToEntry},"Back")))}var N=t(153),S=t(81);function O(e){var a=e.data,t=e.onCreateCreateClick;return r.a.createElement("div",{className:"lobby"},r.a.createElement("div",null,r.a.createElement(k.a.Label,null,"Name"),r.a.createElement(k.a.Control,{type:"text",value:a.name,onChange:a.onNameChange})),r.a.createElement("div",null,r.a.createElement(k.a.Label,null,"Number of players"),r.a.createElement(N.a,{type:"radio",name:"numPlayers",value:a.numPlayers,onChange:a.onNumPlayersChange},r.a.createElement(S.a,{value:2},"2"),r.a.createElement(S.a,{value:3},"3"),r.a.createElement(S.a,{value:4},"4"),r.a.createElement(S.a,{value:5},"5"),r.a.createElement(S.a,{value:6},"6"),r.a.createElement(S.a,{value:7},"7"),r.a.createElement(S.a,{value:8},"8"))),r.a.createElement("div",null,r.a.createElement(k.a.Label,null,"Number of cats"),r.a.createElement(N.a,{type:"radio",name:"numCats",value:a.numCats,onChange:a.onNumCatsChange},r.a.createElement(S.a,{value:3},"3"),r.a.createElement(S.a,{value:4},"4"),r.a.createElement(S.a,{value:5},"5"),r.a.createElement(S.a,{value:6},"6"))),r.a.createElement("div",null,r.a.createElement(k.a.Check,{type:"checkbox",label:"Veil mode"}),r.a.createElement(k.a.Check,{type:"checkbox",label:"Random seat"})),r.a.createElement("div",null,r.a.createElement(C.a,{variant:"primary",onClick:t,disabled:!a.name},"Create"),r.a.createElement(C.a,{variant:"secondary",onClick:a.backToEntry},"Back")))}var j=t(150);function P(e){var a,t,n,l=e.data,c=e.startGame,i=r.a.useState(null),m=Object(o.a)(i,2),s=m[0],u=m[1],d=r.a.useState(0),p=Object(o.a)(d,2),f=p[0],v=p[1],y=r.a.useState(-1),E=Object(o.a)(y,2),g=E[0],b=E[1],h=r.a.useState(""),k=Object(o.a)(h,2),D=k[0],I=k[1],N=r.a.useState(!1),S=Object(o.a)(N,2),O=S[0],P=S[1],T=r.a.useCallback((function(){fetch(l.serverPathFull+"/"+l.gameID,{method:"get"}).then((function(e){return e.json()})).then((function(e){return u(e)}))}),[l.gameID,l.serverPathFull]),x=r.a.useCallback((function(){T();for(var e=0;e<s.players.length;e++)if(null==s.players[e].name)return e}),[s,T]),w=r.a.useCallback((function(){var e=x(),a={playerID:e,playerName:l.name};fetch(l.serverPathFull+"/"+s.roomID+"/join",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(a){I(a.playerCredentials),b(e),T()}))}),[l.name,x,s,l.serverPathFull,T]);function M(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a={playerID:g,credentials:D};fetch(l.serverPathFull+"/"+s.roomID+"/leave",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(){e&&T()})),b(-1)}return r.a.useEffect((function(){var e=setInterval((function(){T()}),2e3);return function(){clearInterval(e)}})),r.a.useEffect((function(){null!=s&&v((function(){for(var e=0,a=0;a<s.players.length;a++)null!=s.players[a].name&&e++;return e}))}),[s,D,g,w]),null==s?(T(),r.a.createElement("div",null,"Connecting... ",l.serverPath)):r.a.createElement("div",{className:"lobby"},r.a.createElement("div",null,"gameID: ",s.roomID),r.a.createElement("div",null,s.players.map((function(e,a){return r.a.createElement("div",{key:a},e.id," - ",e.name)}))),r.a.createElement("div",null,r.a.createElement(C.a,{variant:"secondary",onClick:w,disabled:g>=0},"Sit"),r.a.createElement(C.a,{variant:"secondary",onClick:M,disabled:g<0||1===f},"Stand"),r.a.createElement(C.a,{variant:"secondary",onClick:function(){P(!0)}},"Leave"),r.a.createElement(C.a,{variant:"primary",onClick:function(){return c(l.serverPath,l.gameID,g,D)},disabled:f<s.players.length},"Start")),(t=O,n=P,void 0===(a={header:"Leaving",body:"Are you sure you'd like to leave?",confirm:"Leave"}).confirm&&(a.confirm="Confirm"),r.a.createElement(j.a,{show:t,onHide:function(){return n(!1)}},a.header&&r.a.createElement(j.a.Header,{closeButton:!0},r.a.createElement(j.a.Title,null,a.header)),r.a.createElement(j.a.Body,null,a.body),r.a.createElement(j.a.Footer,null,r.a.createElement(C.a,{variant:"secondary",onClick:function(){return n(!1)}},"Close"),r.a.createElement(C.a,{variant:"primary",onClick:function(){M(!1),l.backToEntry(),n(!1)}},a.confirm)))))}function T(e){var a=e.startGame,t=r.a.useState(""),n=Object(o.a)(t,2),l=n[0],c=n[1],i=r.a.useState("entry"),m=Object(o.a)(i,2),s=m[0],u=m[1],d=r.a.useState(""),p=Object(o.a)(d,2),f=p[0],v=p[1],y=r.a.useState(4),E=Object(o.a)(y,2),g=E[0],b=E[1],h=r.a.useState(5),k=Object(o.a)(h,2),C=k[0],N=k[1];var S=r.a.useState("https://camaew-up.herokuapp.com"),j=Object(o.a)(S,2),T=j[0],x=j[1];function w(e){return fetch(T+"/games/CamaewUp/create",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()}))}function M(){u("wait")}r.a.useEffect((function(){if(console.log(Object({NODE_ENV:"production",PUBLIC_URL:"/camaew-up",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_AGENT),"host"===Object({NODE_ENV:"production",PUBLIC_URL:"/camaew-up",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_AGENT){w({numPlayers:2,setupData:{test:!0,numCats:5,numTiles:16}}).then((function(e){console.log(e.gameID),fetch(T+"/games/CamaewUp/"+e.gameID+"/join",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({playerID:0,playerName:"Host"})}).then((function(e){return e.json()})).then((function(t){a(T,e.gameID,0,t.playerCredentials)}))}))}else"client"===Object({NODE_ENV:"production",PUBLIC_URL:"/camaew-up",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_AGENT&&fetch(T+"/games/CamaewUp/").then((function(e){return e.json()})).then((function(e){var t=e.rooms.pop().gameID;fetch(T+"/games/CamaewUp/"+t+"/join",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({playerID:1,playerName:"Client"})}).then((function(e){return e.json()})).then((function(e){a(T,t,1,e.playerCredentials)}))}))}),[]);var B={name:l,gameID:f,numPlayers:g,numCats:C,serverPath:T,serverPathFull:T+"/games/CamaewUp",onServerPathChange:function(e){x(e.target.value)},onNameChange:function(e){c(e.target.value)},onGameIDChange:function(e){v(e.target.value)},onNumPlayersChange:function(e){b(e)},onNumCatsChange:function(e){N(e)},backToEntry:function(){u("entry")}};return"entry"===s?r.a.createElement(D,{data:B,onJoinClick:function(){u("join")},onCreateClick:function(){u("create")}}):"join"===s?r.a.createElement(I,{data:B,onJoinJoinClick:function(){M()}}):"create"===s?r.a.createElement(O,{data:B,onCreateCreateClick:function(){w({numPlayers:g,setupData:{numCats:C,numTiles:16}}).then((function(e){v(e.gameID),M()}))}}):"wait"===s?r.a.createElement(P,{data:B,startGame:a}):void 0}var x=t(20);function w(e){var a=e.cellData,t=e.cell_id,n=e.isExtra,l=e.playerID,c=e.gameMetadata,o=e.prePlaceMod,i=(e.preMoveMod,e.preFlipMod);return r.a.createElement("div",{className:"cell "+(n&&"cell-extra"),onDragOver:function(e){e.preventDefault()},onDrop:function(e){e.preventDefault(),o(Number(t),e.dataTransfer.getData("type"))}},r.a.createElement("div",{className:"cell-content"}),a.mod&&r.a.createElement("div",{className:"cell-mod card ".concat(a.mod.type),onClick:function(){i(Number(t))},draggable:l===a.mod.playerID,onDragStart:function(e){e.dataTransfer.setData("type","move")}},c[a.mod.playerID].name||"\u2013"))}var M=t(59),B=t.n(M),_=t(19);function A(e){var a=e.G,t=e.playerID,n=e.gameMetadata,l=e.placeMod,c=e.moveMod,i=e.removeMod,m=e.flipMod,s=r.a.useState(!1),u=Object(o.a)(s,2),d=u[0],p=u[1],f=r.a.useState(!1),v=Object(o.a)(f,2),y=v[0],E=v[1],g=r.a.useState(null),b=Object(o.a)(g,2),h=b[0],k=b[1],D=r.a.useState(null),I=Object(o.a)(D,2),N=I[0],S=I[1],O=r.a.useState(a.cats),P=Object(o.a)(O,2),T=P[0],x=P[1];function M(e,n){if("place"===n&&a.players[t].modPos>-1)console.error("Player has already placed his/her mod.");else if(a.board[e].stack.length>0)console.error("Cannot place mod where cats are.");else if(e>0&&null!==a.board[e-1].mod&&a.board[e-1].mod.playerID!==t||e<a.board.length-1&&null!==a.board[e+1].mod&&a.board[e+1].mod!==t)console.error("Cannot place mod adjacent to an existing mod.");else if(null===a.board[e].mod)k(e),S(n),p(!0);else{if(a.board[e].mod.playerID===t)return;console.error("Cannot place mod on top of an existing mod.")}}function A(e){k(e),E(!0)}function U(){return r.a.createElement(j.a,{show:d,onHide:function(){return p(!1)}},r.a.createElement(j.a.Header,{closeButton:!0},r.a.createElement(j.a.Title,null,"Placing Mod")),r.a.createElement(j.a.Body,null,"Which kind of mod would you like to place?"),r.a.createElement(j.a.Footer,null,r.a.createElement(C.a,{variant:"secondary",onClick:function(){return p(!1)}},"Cancel"),r.a.createElement(C.a,{variant:"danger",onClick:function(){"place"===N?l(t,h,"tape"):"move"===N&&c(t,h,"tape"),p(!1)}},"Tape"),r.a.createElement(C.a,{variant:"success",onClick:function(){"place"===N?l(t,h,"cucumber"):"move"===N&&c(t,h,"cucumber"),p(!1)}},"Cucumber")))}function L(){return r.a.createElement(j.a,{show:y,onHide:function(){return E(!1)}},r.a.createElement(j.a.Header,{closeButton:!0},r.a.createElement(j.a.Title,null,"Flipping Mod")),r.a.createElement(j.a.Body,null,"Would you like to flip the mod?"),r.a.createElement(j.a.Footer,null,r.a.createElement(C.a,{variant:"secondary",onClick:function(){return E(!1)}},"Cancel"),r.a.createElement(C.a,{variant:"outline-primary",onClick:function(){i(t),E(!1)}},"Remove"),r.a.createElement(C.a,{variant:"primary",onClick:function(){m(t),E(!1)}},"Flip")))}var F=["(\ua3ff \u11ba \ua3ff)","(=^ \u25e1 ^=)","(=\u272a\u11bd\u272a=)","(=\u0da0\u11bd\u0da0=)","(\u2257\u11bd\u2257)","( \u033f\u2013\u11ba \u033f\u2013)"];function G(e){return Number(B.a[e].substring(0,B.a[e].length-2))}var H={width:G("cellwidth"),height:G("cellheight"),margin:G("cellmargin")},J={width:G("tokenwidth"),height:G("tokenheight"),margin:G("tokenmargin")};return Object(_.useEffectListener)("moveFwd",(function(e){var a,t=e.catID,n=e.roll,r=e.preCats,l=e.preBoard,c=r[t][0],o=r,i=l[c].stack,m=i.indexOf(t);a=i.slice(m);for(var s=l[c+1+n].stack.length,u=0;u<a.length;u++)o[a[u]]=[c+1+n,s+u];x(o)}),[]),Object(_.useEffectListener)("modCucumber",(function(e){for(var a=e.cellNum,t=e.preCats,n=e.destHeight,r=e.stack,l=t,c=0;c<r.length;c++)l[r[c]]=[a+1,n+c];x(l)}),[]),Object(_.useEffectListener)("modTape",(function(e){for(var a=e.cellNum,t=e.preCats,n=e.prevStack,r=e.stack,l=t,c=0;c<r.length;c++)l[r[c]]=[a-1,c];for(var o=0;o<n.length;o++)l[n[o]][1]=r.length+o;x(l)}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"board"},a.board.map((function(e,l){return r.a.createElement(w,{cellData:e,key:l,cell_id:l,isExtra:l>=a.numTiles,playerID:t,gameMetadata:n,prePlaceMod:M,preFlipMod:A})})),T.map((function(e,a){return r.a.createElement("div",{className:"cat tokencolor-".concat(a),id:"cattoken-".concat(a),key:"cat_stack_tmp"+a,style:(t=e,{left:"".concat(t[0]*(H.width+2*H.margin)+H.margin+(H.width-J.width)/2,"px"),top:"".concat(H.height+H.margin-(t[1]+1)*(J.height+J.margin),"px")})},F[a],r.a.createElement("br",null));var t}))),r.a.createElement(U,null),r.a.createElement(L,null))}var U=t(152);function L(e){var a=e.currentPlayer,t=e.players,n=e.gameMetadata;return r.a.createElement("div",{className:"players"},r.a.createElement(U.a,null,n.map((function(e,n){return r.a.createElement(U.a.Item,{active:e.id===Number(a),className:"flex",key:"player"+n},"".concat(e.name," (").concat(t[n].coins,")"),t[n].smallBets.map((function(e,a){return r.a.createElement(r.a.Fragment,{key:"smallBets"+a},e.map((function(e){return r.a.createElement("div",{className:"tokencolor-".concat(a," card"),key:"smallBet"+n},e)})))})))}))))}function F(e){var a=e.dice,t=r.a.useState(a),n=Object(o.a)(t,2),l=n[0],c=n[1];var i=null;return Object(_.useEffectListener)("roll",(function(e){var a=e.catID,t=e.preDice;i=setInterval((function(){c(function(e,a,t){var n=e.slice();return n[a]=t,n}(t,a,Object(s.random)(1,3)))}),100)}),[]),Object(_.useEffectListener)("rollDone",(function(e){clearInterval(i),c(e)}),[]),r.a.createElement("div",null,r.a.createElement("div",{className:"section"},"Rolled dice"),r.a.createElement(U.a,{horizontal:!0},l.map((function(e,a){return r.a.createElement(U.a.Item,{className:"tokencolor-".concat(a),key:a},e)}))))}function G(e){var a=e.stack,t=e.makeSmallBet;return r.a.createElement("div",null,r.a.createElement("div",{className:"section"},"SmallStack"),r.a.createElement(U.a,{horizontal:!0},a.map((function(e,n){return r.a.createElement(U.a.Item,{className:"tokencolor-".concat(n),onClick:function(){var e;a[e=n].length>0&&t(e)},key:n},e[e.length-1])}))))}function H(e){var a=e.cards;function t(e){e.dataTransfer.setData("betID",e.target.getAttribute("bet_id"))}return r.a.createElement("div",null,r.a.createElement("div",{className:"section"},"Bet Cards"),r.a.createElement("div",{className:"flex"},a.map((function(e,a){return e?r.a.createElement("div",{className:"tokencolor-".concat(a," card"),bet_id:a,draggable:"true",onDragStart:t,key:"betCards"+a},"X"):null}))))}function J(e){var a=e.stack,t=e.playerID,n=e.makeBigBet,l=e.side;return r.a.createElement("div",{className:"betzone",onDragOver:function(e){e.preventDefault()},onDrop:function(e){e.preventDefault(),n(t,Number(e.dataTransfer.getData("betID")),l)}},"".concat(l,": ").concat(a[l].length))}function R(e){var a=e.hasMod,t=e.playerID;return r.a.createElement("div",null,r.a.createElement("div",{className:"section"},"Mod Tile"),r.a.createElement("div",{className:"flex"},r.a.createElement("div",{className:"card",draggable:a,player_id:t,onDragStart:function(e){e.dataTransfer.setData("playerID",e.target.getAttribute("player_id")),e.dataTransfer.setData("type","place")}},a?"X":"\u2013")))}function W(e){var a=e.logArray,t=e.gameMetadata,n=r.a.useRef(null);return r.a.useEffect((function(){n.current.scrollTop=n.current.scrollHeight}),[a]),r.a.createElement("div",{className:"log-area",ref:n},a.map((function(e,a){switch(e.move){case"text":return r.a.createElement("div",{key:"log"+a},e.text);case"roll":return r.a.createElement("div",{className:"flex",key:"log"+a},"".concat(t[e.playerID].name," rolled a "),r.a.createElement("span",{className:"tokencolor-".concat(e.catID," card")},e.roll));case"mod":return r.a.createElement("div",{className:"flex",key:"log"+a},"... found a ".concat(e.mod));case"smallBet":return r.a.createElement("div",{className:"flex",key:"log"+a},"".concat(t[e.playerID].name," took a small bet "),r.a.createElement("span",{className:"tokencolor-".concat(e.catID," card")},e.card));case"bigBet":return r.a.createElement("div",{className:"flex",key:"log"+a},"".concat(t[e.playerID].name," made a ").concat(e.side," bet"));case"placeMod":return r.a.createElement("div",{className:"flex",key:"log"+a},"".concat(t[e.playerID].name," placed a ").concat(e.type," mod at ").concat(e.cellID));case"removeMod":return r.a.createElement("div",{className:"flex",key:"log"+a},"".concat(t[e.playerID].name," removed the mod at ").concat(e.cellID));case"flipMod":return r.a.createElement("div",{className:"flex",key:"log"+a},"".concat(t[e.playerID].name," flipped the mod at ").concat(e.cellID));case"moveMod":return r.a.createElement("div",{className:"flex",key:"log"+a},"".concat(t[e.playerID].name," moved the mod to a ").concat(e.type," mod at ").concat(e.cellID));default:return r.a.createElement("div",{key:"log"+a})}})))}function K(e){var a=e.G,t=e.ctx,n=e.moves,l=e.playerID,c=e.gameMetadata;e.gameID,Object(x.a)(e,["G","ctx","moves","playerID","gameMetadata","gameID"]);return l=Number(l),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"flex"},r.a.createElement("div",{className:"control"},r.a.createElement("div",{className:"section"},"Camaew Up!"),r.a.createElement("div",null,r.a.createElement(L,{currentPlayer:t.currentPlayer,players:a.players,gameMetadata:c})),r.a.createElement("div",null,r.a.createElement(C.a,{variant:"primary",onClick:function(){return n.roll(l)}},"Roll"),r.a.createElement(F,{dice:a.dice}))),r.a.createElement("div",{className:"control"},r.a.createElement(R,{hasMod:-1===a.players[l].modPos,playerID:l}),r.a.createElement(G,{stack:a.smallStack,makeSmallBet:function(e){return n.makeSmallBet(l,e)}}),r.a.createElement(H,{cards:a.players[l].betCards}),r.a.createElement("div",{className:"flex"},r.a.createElement(J,{stack:a.bigStack,playerID:l,makeBigBet:n.makeBigBet,side:"lose"}),r.a.createElement(J,{stack:a.bigStack,playerID:l,makeBigBet:n.makeBigBet,side:"win"}))),r.a.createElement("div",{className:"control"},r.a.createElement(W,{logArray:a.logArray,gameMetadata:c}))),r.a.createElement("div",{id:"racetrack-wrapper"},r.a.createElement(A,{G:a,playerID:l,gameMetadata:c,placeMod:n.placeMod,moveMod:n.moveMod,removeMod:n.removeMod,flipMod:n.flipMod})))}var z=t(88),V=t(62),X=(t(116),null),q=Object(z.a)();V.a.initialize("UA-2995735-5"),V.a.pageview(window.location.pathname+window.location.search);var Q=function(){var e=Object(n.useState)("lobby"),a=Object(o.a)(e,2),t=a[0],l=a[1],c=Object(n.useState)({}),s=Object(o.a)(c,2),u=s[0],d=s[1];return Object(n.useEffect)((function(){"game"===t.name&&q.push("?"+t.gameID)}),[t.name,t.gameID]),"lobby"===t?r.a.createElement("div",null,r.a.createElement(T,{startGame:function(e,a,t,n){d({gameID:a,playerID:t,credentials:n});var r=Object(_.EffectsBoardWrapper)(K,{updateStateAfterEffects:!0});X=Object(i.a)({game:h,board:r,multiplayer:Object(m.b)({server:e}),debug:!0}),l("game")}})):"game"===t?r.a.createElement("div",null,r.a.createElement(X,{gameID:u.gameID,playerID:String(u.playerID),credentials:u.credentials})):void 0};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Q,null)),document.getElementById("root"))},59:function(e,a,t){e.exports={cellwidth:"120px",cellheight:"120px",cellmargin:"3px",tokenwidth:"80px",tokenheight:"30px",tokenmargin:"5px"}},93:function(e,a,t){e.exports=t(146)},98:function(e,a,t){}},[[93,1,2]]]);
//# sourceMappingURL=main.2d48492e.chunk.js.map
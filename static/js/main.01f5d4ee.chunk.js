(this["webpackJsonpcamaew-up"]=this["webpackJsonpcamaew-up"]||[]).push([[0],{114:function(e,a,t){e.exports={cellwidth:"120px",cellheight:"120px",cellmargin:"3px",tokenwidth:"80px",tokenheight:"30px",tokenmargin:"5px"}},115:function(e,a,t){},141:function(e,a){},145:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(23),c=t.n(l),o=t(9),i=t(88),s=t(43),m=t(12),u=t(78);function d(e,a){for(var t=new Array(e),n=0;n<e;n++)t[n]=Object(m.cloneDeep)(a);return t}function p(e){var a=Array.from(new Array(e.numCats),(function(e,a){return a}));return a.sort((function(a,t){return 100*(e.cats[t][0]-e.cats[a][0])+(e.cats[t][1]-e.cats[a][1])})),a}function f(e,a){e.dice=Array(e.numCats).fill(0);for(var t=0;t<a.numPlayers;t++)e.players[t].smallBets=Array(e.numCats).fill([]),g(e,t);e.smallStack=Array(e.numCats).fill([2,3,5]),a.effects.endSmallRound()}function v(e,a){e.dice=Array(e.numCats).fill(0);for(var t=p(e),n=0;n<a.numPlayers;n++){var r=0;r+=Object(m.sum)(e.players[n].smallBets[t[0]]),r+=e.players[n].smallBets[t[1]].length;for(var l=2;l<e.numCats;l++)r-=e.players[n].smallBets[t[l]].length;e.players[n].coins+=r}}function y(e,a,t){var n=e.dice.filter((function(e){return 0===e})).length,r=a.random.Die(n)-1,l=a.random.Die(3),c=0,o=0;for(o=0;o<e.numCats;o++)if(0===e.dice[o]){if(c===r){e.dice[o]=l,e.lastDiceRolled=o;break}c++}return o===e.numCats&&console.error("Something's wrong. The dice probably didn't get reset."),function(e,a,t,n){var r=e.cats[t][0],l=[];if(r>=0){var c=e.board[r].stack,o=c.indexOf(t);l=c.slice(o),e.board[r].stack=e.board[r].stack.slice(0,o)}else l=[t];var i=e.board[r+n].stack.length;e.board[r+n].stack=e.board[r+n].stack.concat(l);for(var s=0;s<l.length;s++)e.cats[l[s]]=[r+n,i+s];e.cleanUp=r+n}(e,0,o,l),null!=t&&(e.players[t].coins+=1),[o,l]}function b(e,a,t,n){e.board[t].mod={playerID:a,type:n},e.players[a].modPos=t}function g(e,a){e.players[a].modPos>-1&&(e.board[e.players[a].modPos].mod=null,e.players[a].modPos=-1)}function E(e,a){e.logArray.push(a)}var h={name:"CamaewUp",plugins:[Object(u.EffectsPlugin)({effects:{endTurn:{},roll:{create:function(e){return e},duration:1},rollDone:{create:function(e){return e},duration:.2},rollReset:{create:function(e){return e}},moveFwd:{create:function(e){return e},duration:.3},modTape:{create:function(e){return e},duration:.3},modCucumber:{create:function(e){return e},duration:.3},endSmallRound:{}}})],setup:function(e,a){var t={dice:Array(a.numCats).fill(0),cats:Array(a.numCats).fill([-1,-1]),board:d(a.numTiles+3,{stack:[],mod:null}),players:d(e.numPlayers,{coins:3,smallBets:Array(a.numCats).fill([]),betCards:Array(a.numCats).fill(!0),modPos:-1}),smallStack:Array(a.numCats).fill([2,3,5]),bigStack:{win:[],lose:[]},logArray:[],numCats:a.numCats,numTiles:a.numTiles,numPlayers:e.numPlayers,lastDiceRolled:-1,cleanUp:-1};E(t,{move:"text",text:"Welcome!"});for(var n=0;n<t.numCats;n++)y(t,e);return f(t,e),t},moves:{roll:function(e,a,t){var n=Object(m.cloneDeep)(e.cats),r=Object(m.cloneDeep)(e.board),l=y(e,a,t),c=Object(o.a)(l,2),i=c[0],s=c[1];a.effects.roll(i),a.effects.rollDone(s),a.effects.rollReset(e.dice.slice());for(var u=0;u<s;u++)a.effects.moveFwd({catID:i,roll:u,preCats:n,preBoard:r});(E(e,{playerID:t,move:"roll",catID:i,roll:s}),function(e,a){var t=e.board[e.cleanUp].mod;if(null!==t){E(e,{move:"mod",mod:t.type}),e.players[t.playerID].coins+=1;var n=e.board[e.cleanUp].stack.slice();e.board[e.cleanUp].stack=[];var r=999;"tape"===t.type?(r=e.cleanUp-1,a.effects.modTape({cellNum:e.cleanUp,preCats:Object(m.cloneDeep)(e.cats),prevStack:e.board[e.cleanUp-1].stack.slice(),stack:n}),e.board[r].stack=n.concat(e.board[r].stack)):"cucumber"===t.type&&(r=e.cleanUp+1,a.effects.modCucumber({cellNum:e.cleanUp,preCats:Object(m.cloneDeep)(e.cats),destHeight:e.board[r].stack.length,stack:n}),e.board[r].stack=e.board[r].stack.concat(n));for(var l=0;l<e.board[r].stack.length;l++)e.cats[e.board[r].stack[l]]=[r,l]}}(e,a),e.cleanUp>=e.numTiles)&&(v(e,a),function(e,a){for(var t=p(e),n=[1,2,3,5,8],r=0;r<e.bigStack.win.length;r++){var l=e.bigStack.win[r];l.bet===t[0]?e.players[l.playerID].coins+=n.pop():e.players[l.playerID].coins-=1,0===n.length&&(n=[1])}for(var c=[1,2,3,5,8],o=0;o<e.bigStack.lose.length;o++){var i=e.bigStack.lose[o];i.bet===t[e.numCats-1]?e.players[i.playerID].coins+=c.pop():e.players[i.playerID].coins-=1,0===c.length&&(c=[1])}}(e),E(e,{move:"text",text:"Winners: "+function(e){for(var a=[e.players[0].coins],t=[0],n=1;n<e.numPlayers;n++)e.players[n].coins>a?(a=e.players[n].coins,t=[n]):e.players[n].coins===a&&t.push(n);return t}(e)}),E(e,{move:"text",text:"--- End of game ---"}));0===e.dice.filter((function(e){return 0===e})).length&&(E(e,{move:"text",text:"--- End of small round ---"}),v(e,a),f(e,a))},makeSmallBet:function(e,a,t,n){var r=function(e,a,t){var n=e.smallStack[t].pop();return e.players[a].smallBets[t].push(n),n}(e,t,n);E(e,{playerID:t,move:"smallBet",catID:n,card:r})},makeBigBet:function(e,a,t,n,r){!function(e,a,t,n){e.bigStack[n].push({playerID:a,bet:t}),e.players[a].betCards[t]=!1}(e,t,n,r),E(e,{playerID:t,move:"bigBet",side:r})},placeMod:function(e,a,t,n,r){b(e,t,n,r),E(e,{playerID:t,move:"placeMod",cellID:n,type:r})},removeMod:function(e,a,t){g(e,t),E(e,{playerID:t,move:"removeMod",cellID:e.players[t].modPos})},flipMod:function(e,a,t){var n="tape"===e.board[e.players[t].modPos].mod.type?"cucumber":"tape",r=e.players[t].modPos;g(e,t),b(e,t,r,n),E(e,{playerID:t,move:"flipMod",cellID:e.players[t].modPos})},moveMod:function(e,a,t,n,r){g(e,t),b(e,t,n,r),E(e,{playerID:t,move:"placeMod",cellID:n,type:r})}},turn:{moveLimit:1,onEnd:function(e,a){},onMove:function(e,a){}},minPlayers:2,maxPlayers:8},C=t(150),k=t(89);function D(e){var a=e.data,t=e.onJoinClick,n=e.onCreateClick;return r.a.createElement("div",{id:"entry-container",className:"lobby"},r.a.createElement("div",{id:"entry-server"},r.a.createElement(C.a.Label,null,"Server"),r.a.createElement(C.a.Control,{type:"text",value:a.serverPath,onChange:a.onServerPathChange})),r.a.createElement("div",null,r.a.createElement(k.a,{variant:"primary",onClick:t,size:"lg"},"Join Game")),r.a.createElement("div",null,r.a.createElement(k.a,{variant:"primary",onClick:n,size:"lg"},"Create Game")))}function O(e){var a=e.data,t=e.onJoinJoinClick;return r.a.createElement("div",{className:"lobby"},r.a.createElement("div",null,r.a.createElement(C.a.Label,null,"Name"),r.a.createElement(C.a.Control,{type:"text",value:a.name,onChange:a.onNameChange})),r.a.createElement("div",{id:"join-gameid"},r.a.createElement(C.a.Label,null,"Game ID"),r.a.createElement(C.a.Control,{type:"text",value:a.gameID,onChange:a.onGameIDChange})),r.a.createElement("div",{id:"lobby-join",className:"center"},r.a.createElement(C.a.Label,null,"Join Game"),r.a.createElement(k.a,{variant:"primary",onClick:t,disabled:!a.gameID||!a.name},"Join"),r.a.createElement(k.a,{variant:"secondary",onClick:a.backToEntry},"Back")))}var S=t(151),I=t(80);function N(e){var a=e.data,t=e.onCreateCreateClick;return r.a.createElement("div",{className:"lobby"},r.a.createElement("div",null,r.a.createElement(C.a.Label,null,"Name"),r.a.createElement(C.a.Control,{type:"text",value:a.name,onChange:a.onNameChange})),r.a.createElement("div",null,r.a.createElement(C.a.Label,null,"Number of players"),r.a.createElement(S.a,{type:"radio",name:"numPlayers",value:a.numPlayers,onChange:a.onNumPlayersChange},r.a.createElement(I.a,{value:2},"2"),r.a.createElement(I.a,{value:3},"3"),r.a.createElement(I.a,{value:4},"4"),r.a.createElement(I.a,{value:5},"5"),r.a.createElement(I.a,{value:6},"6"),r.a.createElement(I.a,{value:7},"7"),r.a.createElement(I.a,{value:8},"8"))),r.a.createElement("div",null,r.a.createElement(C.a.Label,null,"Number of cats"),r.a.createElement(S.a,{type:"radio",name:"numCats",value:a.numCats,onChange:a.onNumCatsChange},r.a.createElement(I.a,{value:3},"3"),r.a.createElement(I.a,{value:4},"4"),r.a.createElement(I.a,{value:5},"5"),r.a.createElement(I.a,{value:6},"6"))),r.a.createElement("div",null,r.a.createElement(C.a.Check,{type:"checkbox",label:"Veil mode"}),r.a.createElement(C.a.Check,{type:"checkbox",label:"Random seat"})),r.a.createElement("div",null,r.a.createElement(k.a,{variant:"primary",onClick:t,disabled:!a.name},"Create"),r.a.createElement(k.a,{variant:"secondary",onClick:a.backToEntry},"Back")))}var j=t(149);function P(e){var a,t,n,l=e.data,c=e.startGame,i=r.a.useState(null),s=Object(o.a)(i,2),m=s[0],u=s[1],d=r.a.useState(0),p=Object(o.a)(d,2),f=p[0],v=p[1],y=r.a.useState(-1),b=Object(o.a)(y,2),g=b[0],E=b[1],h=r.a.useState(""),C=Object(o.a)(h,2),D=C[0],O=C[1],S=r.a.useState(!1),I=Object(o.a)(S,2),N=I[0],P=I[1],T=r.a.useCallback((function(){fetch(l.serverPathFull+"/"+l.gameID,{method:"get"}).then((function(e){return e.json()})).then((function(e){return u(e)}))}),[l.gameID,l.serverPathFull]),w=r.a.useCallback((function(){T();for(var e=0;e<m.players.length;e++)if(null==m.players[e].name)return e}),[m,T]),x=r.a.useCallback((function(){var e=w(),a={playerID:e,playerName:l.name};fetch(l.serverPathFull+"/"+m.roomID+"/join",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(a){O(a.playerCredentials),E(e),T()}))}),[l.name,w,m,l.serverPathFull,T]);function M(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a={playerID:g,credentials:D};fetch(l.serverPathFull+"/"+m.roomID+"/leave",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(){e&&T()})),E(-1)}return r.a.useEffect((function(){var e=setInterval((function(){T()}),2e3);return function(){clearInterval(e)}})),r.a.useEffect((function(){null!=m&&v((function(){for(var e=0,a=0;a<m.players.length;a++)null!=m.players[a].name&&e++;return e}))}),[m,D,g,x]),null==m?(T(),r.a.createElement("div",null,"Connecting... ",l.serverPath)):r.a.createElement("div",{className:"lobby"},r.a.createElement("div",null,"gameID: ",m.roomID),r.a.createElement("div",null,m.players.map((function(e,a){return r.a.createElement("div",{key:a},e.id," - ",e.name)}))),r.a.createElement("div",null,r.a.createElement(k.a,{variant:"secondary",onClick:x,disabled:g>=0},"Sit"),r.a.createElement(k.a,{variant:"secondary",onClick:M,disabled:g<0||1===f},"Stand"),r.a.createElement(k.a,{variant:"secondary",onClick:function(){P(!0)}},"Leave"),r.a.createElement(k.a,{variant:"primary",onClick:function(){return c(l.serverPath,l.gameID,g,D)},disabled:f<m.players.length},"Start")),(t=N,n=P,void 0===(a={header:"Leaving",body:"Are you sure you'd like to leave?",confirm:"Leave"}).confirm&&(a.confirm="Confirm"),r.a.createElement(j.a,{show:t,onHide:function(){return n(!1)}},a.header&&r.a.createElement(j.a.Header,{closeButton:!0},r.a.createElement(j.a.Title,null,a.header)),r.a.createElement(j.a.Body,null,a.body),r.a.createElement(j.a.Footer,null,r.a.createElement(k.a,{variant:"secondary",onClick:function(){return n(!1)}},"Close"),r.a.createElement(k.a,{variant:"primary",onClick:function(){M(!1),l.backToEntry(),n(!1)}},a.confirm)))))}function T(e){var a=e.startGame,t=r.a.useState(""),n=Object(o.a)(t,2),l=n[0],c=n[1],i=r.a.useState("entry"),s=Object(o.a)(i,2),m=s[0],u=s[1],d=r.a.useState(""),p=Object(o.a)(d,2),f=p[0],v=p[1],y=r.a.useState(4),b=Object(o.a)(y,2),g=b[0],E=b[1],h=r.a.useState(5),C=Object(o.a)(h,2),k=C[0],S=C[1];var I=r.a.useState("https://camaew-up.herokuapp.com"),j=Object(o.a)(I,2),T=j[0],w=j[1];function x(e){return fetch(T+"/games/CamaewUp/create",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()}))}function M(){u("wait")}r.a.useEffect((function(){if(console.log(Object({NODE_ENV:"production",PUBLIC_URL:"/camaew-up",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_AGENT),"host"===Object({NODE_ENV:"production",PUBLIC_URL:"/camaew-up",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_AGENT){x({numPlayers:2,setupData:{test:!0,numCats:5,numTiles:16}}).then((function(e){console.log(e.gameID),fetch(T+"/games/CamaewUp/"+e.gameID+"/join",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({playerID:0,playerName:"Host"})}).then((function(e){return e.json()})).then((function(t){a(T,e.gameID,0,t.playerCredentials)}))}))}else"client"===Object({NODE_ENV:"production",PUBLIC_URL:"/camaew-up",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_AGENT&&fetch(T+"/games/CamaewUp/").then((function(e){return e.json()})).then((function(e){var t=e.rooms.pop().gameID;fetch(T+"/games/CamaewUp/"+t+"/join",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({playerID:1,playerName:"Client"})}).then((function(e){return e.json()})).then((function(e){a(T,t,1,e.playerCredentials)}))}))}),[]);var B={name:l,gameID:f,numPlayers:g,numCats:k,serverPath:T,serverPathFull:T+"/games/CamaewUp",onServerPathChange:function(e){w(e.target.value)},onNameChange:function(e){c(e.target.value)},onGameIDChange:function(e){v(e.target.value)},onNumPlayersChange:function(e){E(e)},onNumCatsChange:function(e){S(e)},backToEntry:function(){u("entry")}};return"entry"===m?r.a.createElement(D,{data:B,onJoinClick:function(){u("join")},onCreateClick:function(){u("create")}}):"join"===m?r.a.createElement(O,{data:B,onJoinJoinClick:function(){M()}}):"create"===m?r.a.createElement(N,{data:B,onCreateCreateClick:function(){x({numPlayers:g,setupData:{numCats:k,numTiles:16}}).then((function(e){v(e.gameID),M()}))}}):"wait"===m?r.a.createElement(P,{data:B,startGame:a}):void 0}var w=t(19),x=t(10);function M(e){var a=e.cards;function t(e){e.dataTransfer.setData("betID",e.target.getAttribute("bet_id"))}return r.a.createElement("div",null,r.a.createElement("div",{className:"section"},"Bet Cards"),r.a.createElement("div",{className:"flex"},a.map((function(e,a){return e?r.a.createElement("div",{className:"tokencolor-".concat(a," betcard"),bet_id:a,draggable:"true",onDragStart:t,key:"betCards"+a},"X"):null}))))}function B(e){var a=e.hasMod,t=e.playerID;return r.a.createElement("div",null,r.a.createElement("div",{className:"section"},"Mod Tile"),r.a.createElement("div",{className:"flex"},r.a.createElement("div",{className:"modcard",draggable:a,player_id:t,onDragStart:function(e){e.dataTransfer.setData("playerID",e.target.getAttribute("player_id")),e.dataTransfer.setData("type","place")}},a?"X":"\u2013")))}var _=t(84),A=t.n(_);function L(e){var a=e.bets;return r.a.createElement(r.a.Fragment,null,a.map((function(e,a){return r.a.createElement("div",{className:"flex",key:"smallBets"+a},e.map((function(e){return r.a.createElement("div",{className:"tokencolor-".concat(a," card"),key:"smallbetcard"+e},e)})))})))}function H(e){var a=e.name,t=e.data,n=e.isCurrent;return r.a.createElement("div",{className:"player-card xx ".concat(n?"current":"")},r.a.createElement("div",null,r.a.createElement("img",{alt:a||"Player",src:"https://api.adorable.io/avatars/100/".concat(a||"Player",".png")})),r.a.createElement("div",{className:"player-details"},r.a.createElement("div",null,a||"Player"),r.a.createElement("div",null,r.a.createElement("img",{src:A.a,alt:"Coins",height:16})," ",t.coins),r.a.createElement(L,{bets:t.smallBets})))}function U(e){var a=e.playerID,t=e.currentPlayer,n=e.players,l=e.gameMetadata;return r.a.createElement("div",null,Object(x.a)(Array(n.length)).map((function(e,c){var o=(a+1+c)%n.length;return r.a.createElement(H,{name:l[o].name,data:n[o],isCurrent:t===o,key:"player"+o})})),r.a.createElement(M,{cards:n[a].betCards}),r.a.createElement(B,{hasMod:-1===n[a].modPos,playerID:a}))}function R(e){var a=e.cellData,t=e.cell_id,n=e.isExtra,l=e.playerID,c=e.gameMetadata,o=e.prePlaceMod,i=(e.preMoveMod,e.preFlipMod);return r.a.createElement("div",{className:"cell ".concat(n?"cell-extra":""),onDragOver:function(e){e.preventDefault()},onDrop:function(e){e.preventDefault(),o(Number(t),e.dataTransfer.getData("type"))}},r.a.createElement("div",{className:"cell-content"}),a.mod&&r.a.createElement("div",{className:"cell-mod card ".concat(a.mod.type),onClick:function(){i(Number(t))},draggable:l===a.mod.playerID,onDragStart:function(e){e.dataTransfer.setData("type","move")}},c[a.mod.playerID].name||"\u2013"))}var F=t(57),G=t.n(F),J=t(13);function W(e){var a=e.G,t=e.playerID,n=e.gameMetadata,l=e.placeMod,c=e.moveMod,i=e.removeMod,s=e.flipMod,m=r.a.useState(!1),u=Object(o.a)(m,2),d=u[0],p=u[1],f=r.a.useState(!1),v=Object(o.a)(f,2),y=v[0],b=v[1],g=r.a.useState(null),E=Object(o.a)(g,2),h=E[0],C=E[1],D=r.a.useState(null),O=Object(o.a)(D,2),S=O[0],I=O[1],N=r.a.useState(a.cats),P=Object(o.a)(N,2),T=P[0],w=P[1];function x(e,n){if("place"===n&&a.players[t].modPos>-1)console.error("Player has already placed his/her mod.");else if(a.board[e].stack.length>0)console.error("Cannot place mod where cats are.");else if(e>0&&null!==a.board[e-1].mod&&a.board[e-1].mod.playerID!==t||e<a.board.length-1&&null!==a.board[e+1].mod&&a.board[e+1].mod!==t)console.error("Cannot place mod adjacent to an existing mod.");else if(null===a.board[e].mod)C(e),I(n),p(!0);else{if(a.board[e].mod.playerID===t)return;console.error("Cannot place mod on top of an existing mod.")}}function M(e){C(e),b(!0)}function B(){return r.a.createElement(j.a,{show:d,onHide:function(){return p(!1)}},r.a.createElement(j.a.Header,{closeButton:!0},r.a.createElement(j.a.Title,null,"Placing Mod")),r.a.createElement(j.a.Body,null,"Which kind of mod would you like to place?"),r.a.createElement(j.a.Footer,null,r.a.createElement(k.a,{variant:"secondary",onClick:function(){return p(!1)}},"Cancel"),r.a.createElement(k.a,{variant:"danger",onClick:function(){"place"===S?l(t,h,"tape"):"move"===S&&c(t,h,"tape"),p(!1)}},"Tape"),r.a.createElement(k.a,{variant:"success",onClick:function(){"place"===S?l(t,h,"cucumber"):"move"===S&&c(t,h,"cucumber"),p(!1)}},"Cucumber")))}function _(){return r.a.createElement(j.a,{show:y,onHide:function(){return b(!1)}},r.a.createElement(j.a.Header,{closeButton:!0},r.a.createElement(j.a.Title,null,"Flipping Mod")),r.a.createElement(j.a.Body,null,"Would you like to flip the mod?"),r.a.createElement(j.a.Footer,null,r.a.createElement(k.a,{variant:"secondary",onClick:function(){return b(!1)}},"Cancel"),r.a.createElement(k.a,{variant:"outline-primary",onClick:function(){i(t),b(!1)}},"Remove"),r.a.createElement(k.a,{variant:"primary",onClick:function(){s(t),b(!1)}},"Flip")))}var A=["(\ua3ff \u11ba \ua3ff)","(=^ \u25e1 ^=)","(=\u272a\u11bd\u272a=)","(=\u0da0\u11bd\u0da0=)","(\u2257\u11bd\u2257)","( \u033f\u2013\u11ba \u033f\u2013)"];function L(e){return Number(G.a[e].substring(0,G.a[e].length-2))}var H={width:L("cellwidth"),height:L("cellheight"),margin:L("cellmargin")},U={width:L("tokenwidth"),height:L("tokenheight"),margin:L("tokenmargin")};return Object(J.useEffectListener)("moveFwd",(function(e){var a=e.catID,t=e.roll,n=e.preCats,r=e.preBoard;console.log("moveFwd fired");var l,c=n[a][0],o=n,i=r[c].stack,s=i.indexOf(a);l=i.slice(s);for(var m=r[c+1+t].stack.length,u=0;u<l.length;u++)o[l[u]]=[c+1+t,m+u];w(o)}),[]),Object(J.useEffectListener)("modCucumber",(function(e){for(var a=e.cellNum,t=e.preCats,n=e.destHeight,r=e.stack,l=t,c=0;c<r.length;c++)l[r[c]]=[a+1,n+c];w(l)}),[]),Object(J.useEffectListener)("modTape",(function(e){for(var a=e.cellNum,t=e.preCats,n=e.prevStack,r=e.stack,l=t,c=0;c<r.length;c++)l[r[c]]=[a-1,c];for(var o=0;o<n.length;o++)l[n[o]][1]=r.length+o;w(l)}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"cell-container"},a.board.map((function(e,l){return r.a.createElement(R,{cellData:e,key:l,cell_id:l,isExtra:l>=a.numTiles,playerID:t,gameMetadata:n,prePlaceMod:x,preFlipMod:M})})),T.map((function(e,a){return r.a.createElement("div",{className:"cat tokencolor-".concat(a),id:"cattoken-".concat(a),key:"cat_stack_tmp"+a,style:(t=e,{left:"".concat(t[0]*(H.width+2*H.margin)+H.margin+(H.width-U.width)/2,"px"),top:"".concat(H.height+H.margin-(t[1]+1)*(U.height+U.margin),"px")})},A[a],r.a.createElement("br",null));var t}))),r.a.createElement(B,null),r.a.createElement(_,null))}function K(e){var a=e.rollClick,t=e.myTurn,n=r.a.useState(null),l=Object(o.a)(n,2),c=l[0],i=l[1],s=r.a.useState(null),u=Object(o.a)(s,2),d=u[0],p=u[1],f=r.a.useState(t),v=Object(o.a)(f,2),y=v[0],b=v[1],g=null;function E(e){clearInterval(g),i(e),b(!1)}function h(){i(null),p(null)}return Object(J.useEffectListener)("roll",(function(e){console.log("roll"),p(e),g=setInterval((function(){i(Object(m.random)(1,3))}),100)})),Object(J.useEffectListener)("rollDone",E),Object(J.useEffectListener)("rollReset",h),r.a.useEffect((function(){b(t),t||(E(),h())}),[t]),r.a.createElement("div",{id:"dice-wrapper",className:"center"},r.a.createElement("div",{id:"main-dice",className:"rolled-dice ".concat(y?"active":""),onClick:function(){y&&a()}},c?r.a.createElement("div",{className:"center-table dice-size tokencolor-".concat(d)},c):r.a.createElement("div",{className:"center-table circle-shape empty-area dice-size"},"Roll")))}function z(e){var a=e.label,t=e.stack,n=e.cardClass,l=e.stackClass,c=e.clickHandler,i=(e.doubleClickHandler,e.dragOverHandler),s=e.dropHandler,u=r.a.useState([]),d=Object(o.a)(u,2),p=d[0],f=d[1];function v(e){for(var a=Array(e),t=0;t<e;t++)a[t]=Object(m.random)(-7.5,7.5,!0);return a}return r.a.useEffect((function(){l&&"betzone-win"===l&&console.log(t),t.length>p.length?f(p.concat(v(t.length-p.length))):f(p.slice(0,t.length))}),[t]),Object(J.useEffectListener)("endSmallRound",(function(){f(v(t.length))})),r.a.createElement("div",{className:"small-stack "+(l||""),onClick:c,onDragOver:i,onDrop:s},r.a.createElement("div",{className:"card-shape empty-area center di-table"},r.a.createElement("div",{className:"center-table"},a)),t.map((function(e,a){return r.a.createElement("div",{className:"card-standard card-shape center di-table "+(n||""),key:"small-card"+a,style:{transform:"rotate(".concat(p?p[a]:0,"deg) translateX(-50%)"),transformOrigin:"0% 50%"}},r.a.createElement("div",{className:"center-table"},e))})))}function V(e){var a=e.stack,t=e.dice,n=e.makeSmallBet,l=e.rollClick,c=e.myTurn,i=r.a.useState(t),s=Object(o.a)(i,2),m=s[0],u=s[1];return Object(J.useEffectListener)("rollReset",(function(e){console.log("reset heard by camp"),u(e)}),[]),r.a.createElement("div",{id:"camp"},Object(x.a)(Array(a.length)).map((function(e,t){return r.a.createElement("div",{className:"tent",key:"tent"+t,style:{transform:"translateX(-50%) rotate(".concat(-15*(a.length-1)/2+15*t,"deg)")}},r.a.createElement(z,{stack:a[t],cardClass:"tokencolor-".concat(t),clickHandler:function(){c&&a[t].length>0&&n(t)},doubleClickHandler:9}),r.a.createElement("div",{className:"rolled-dice ".concat(m[t]&&"tokencolor-".concat(t))},m[t]?r.a.createElement("div",{className:"center-table"},m[t]):r.a.createElement("div",{className:"center-table circle-shape empty-area"})))})),r.a.createElement(K,{rollClick:l,myTurn:c}))}function X(e){var a=e.bigStack,t=e.playerID,n=e.makeBigBet;function l(e){e.preventDefault()}function c(e,a){e.preventDefault(),n(t,Number(e.dataTransfer.getData("betID")),a)}return r.a.createElement("div",{id:"betarea"},r.a.createElement(z,{label:"L",stackClass:"betzone-lose",stack:Array(a.lose.length).fill("Y"),dragOverHandler:l,dropHandler:function(e){return c(e,"lose")}}),r.a.createElement(z,{label:"W",stackClass:"betzone-win",stack:Array(a.win.length).fill("Y"),dragOverHandler:l,dropHandler:function(e){return c(e,"win")}}))}t(114);function Y(e){var a=e.G,t=e.ctx,n=e.moves,l=e.playerID,c=e.gameMetadata;e.gameID,Object(w.a)(e,["G","ctx","moves","playerID","gameMetadata","gameID"]);return l=Number(l),r.a.createElement("div",{id:"game"},r.a.createElement("div",{className:"panel",id:"main"},r.a.createElement(V,{stack:a.smallStack,dice:a.dice,makeSmallBet:function(e){return n.makeSmallBet(l,e)},rollClick:function(){return n.roll(l)},myTurn:l===Number(t.currentPlayer)}),r.a.createElement(X,{bigStack:a.bigStack,playerID:l,makeBigBet:n.makeBigBet})),r.a.createElement("div",{className:"panel",id:"players"},r.a.createElement(U,{playerID:l,currentPlayer:Number(t.currentPlayer),players:a.players,gameMetadata:c})),r.a.createElement("div",{className:"panel",id:"board"},r.a.createElement(W,{G:a,playerID:l,gameMetadata:c,placeMod:n.placeMod,moveMod:n.moveMod,removeMod:n.removeMod,flipMod:n.flipMod})))}var q=t(87),Q=t(60),Z=(t(115),null),$=Object(q.a)();Q.a.initialize("UA-2995735-5"),Q.a.pageview(window.location.pathname+window.location.search);var ee=function(){var e=Object(n.useState)("lobby"),a=Object(o.a)(e,2),t=a[0],l=a[1],c=Object(n.useState)({}),m=Object(o.a)(c,2),u=m[0],d=m[1];return Object(n.useEffect)((function(){"game"===t.name&&$.push("?"+t.gameID)}),[t.name,t.gameID]),"lobby"===t?r.a.createElement("div",null,r.a.createElement(T,{startGame:function(e,a,t,n){d({gameID:a,playerID:t,credentials:n});var r=Object(J.EffectsBoardWrapper)(Y,{updateStateAfterEffects:!0});Z=Object(i.a)({game:h,board:r,multiplayer:Object(s.b)({server:e}),debug:!1}),l("game")}})):"game"===t?r.a.createElement("div",null,r.a.createElement(Z,{gameID:u.gameID,playerID:String(u.playerID),credentials:u.credentials})):void 0};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ee,null)),document.getElementById("root"))},57:function(e,a,t){e.exports={cellwidth:"120px",cellheight:"120px",cellmargin:"3px",tokenwidth:"80px",tokenheight:"30px",tokenmargin:"5px"}},84:function(e,a,t){e.exports=t.p+"static/media/coin.33f54324.svg"},92:function(e,a,t){e.exports=t(145)}},[[92,1,2]]]);
//# sourceMappingURL=main.01f5d4ee.chunk.js.map